# Shipping Integration Flow Diagrams

## Current Flow vs. Proposed Flow

### Current Flow (Problematic)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           CUSTOMER PERSPECTIVE                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 1: Cart                          Step 2: Submit            Step 3: Wait
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  â”‚                 â”‚                  â”‚      â”‚              â”‚
â”‚  Cart Items      â”‚                 â”‚  Submit for      â”‚      â”‚  Admin       â”‚
â”‚  ---------------â”‚                 â”‚  Review          â”‚      â”‚  Reviewing   â”‚
â”‚  Hat:      $25  â”‚   Click Submit  â”‚                  â”‚      â”‚              â”‚
â”‚  Shirt:    $30  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  â”‚  No Address! âŒ  â”‚ â”€â”€>  â”‚  Approves    â”‚
â”‚  ---------------â”‚                 â”‚  No Shipping! âŒ â”‚      â”‚              â”‚
â”‚  Subtotal: $55  â”‚                 â”‚                  â”‚      â”‚              â”‚
â”‚  Shipping: $0âŒ â”‚                 â”‚  Total: $55 âš ï¸  â”‚      â”‚              â”‚
â”‚  Tax:      $4   â”‚                 â”‚                  â”‚      â”‚              â”‚
â”‚  ---------------â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  Total:    $59  â”‚                                                    â”‚
â”‚                  â”‚                                                    â–¼
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                               Step 4: Checkout
                         PROBLEMS:                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â€¢ No shipping address collected      â”‚ Enter        â”‚
                         â€¢ Shipping cost unknown              â”‚ Address Now  â”‚
                         â€¢ Customer doesn't know real total   â”‚              â”‚
                         â€¢ Admin approves incomplete order    â”‚ Calculate    â”‚
                                                              â”‚ Shipping:    â”‚
                                                              â”‚ $9.99 ğŸ˜±     â”‚
                                                              â”‚              â”‚
                                                              â”‚ New Total:   â”‚
                                                              â”‚ $68.99       â”‚
                                                              â”‚ (Surprise!)  â”‚
                                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Proposed Flow (Correct)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           CUSTOMER PERSPECTIVE                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 1: Cart           Step 2: Checkout           Step 3: Review         Step 4: Submit
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            â”‚        â”‚ Enter Address: â”‚        â”‚ Selected:      â”‚     â”‚             â”‚
â”‚ Cart Items â”‚  Click â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚        â”‚ USPS Priority  â”‚     â”‚  Submit for â”‚
â”‚ ----------â”‚  Chkoutâ”‚ John Doe       â”‚  Auto  â”‚ $9.99          â”‚ User â”‚  Review     â”‚
â”‚ Hat:  $25 â”‚  â”€â”€â”€â”€> â”‚ 123 Main St    â”‚  Calc  â”‚ 3-5 days       â”‚ Cnfm â”‚             â”‚
â”‚ Shirt: $30 â”‚        â”‚ City, ST 12345 â”‚  â”€â”€â”€â”€> â”‚                â”‚ â”€â”€â”€> â”‚ âœ… Address  â”‚
â”‚ ----------â”‚        â”‚                â”‚        â”‚ Other options: â”‚     â”‚ âœ… Shipping â”‚
â”‚ Est. Ship â”‚        â”‚ [Calculate     â”‚        â”‚ â–ª FedEx: $12   â”‚     â”‚ âœ… Total    â”‚
â”‚           â”‚        â”‚  Shipping]     â”‚        â”‚ â–ª UPS: $11     â”‚     â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                                              â”‚
                                                                              â–¼
                      BENEFITS:                                   Step 5: Admin Review
                      â€¢ Address collected early                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â€¢ Shipping cost known                      â”‚ Order #12345    â”‚
                      â€¢ Customer sees real total                 â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
                      â€¢ Admin sees complete order                â”‚ Customer:       â”‚
                                                                 â”‚ John Doe        â”‚
                                                                 â”‚ 123 Main St...  â”‚
                                                                 â”‚                 â”‚
                                                                 â”‚ Shipping:       â”‚
                                                                 â”‚ USPS Priority   â”‚
                                                                 â”‚ $9.99           â”‚
                                                                 â”‚                 â”‚
                                                                 â”‚ Total: $68.99 âœ…â”‚
                                                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Detailed Checkout Flow

### Step-by-Step Process

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        UNIFIED CHECKOUT PROCESS                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. Customer enters â”‚
â”‚     Cart Page       â”‚
â”‚                     â”‚
â”‚  Items:             â”‚
â”‚  â€¢ Hat x1           â”‚
â”‚  â€¢ Shirt x2         â”‚
â”‚                     â”‚
â”‚  [Checkout] Button  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. Navigate to     â”‚
â”‚     Checkout        â”‚
â”‚                     â”‚
â”‚  Route:             â”‚
â”‚  /checkout          â”‚
â”‚                     â”‚
â”‚  State: cartItems   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. Step 1: Shipping Address Form                           â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ First Name: [John        ]  Last Name: [Doe        ]  â”‚ â”‚
â”‚  â”‚ Email: [john@example.com]  Phone: [(555) 123-4567 ]  â”‚ â”‚
â”‚  â”‚ Street: [123 Main Street                          ]  â”‚ â”‚
â”‚  â”‚ Apt: [4B         ]                                    â”‚ â”‚
â”‚  â”‚ City: [New York  ]  State: [NY]  ZIP: [10001]       â”‚ â”‚
â”‚  â”‚ Notes: [Leave at front door                       ]  â”‚ â”‚
â”‚  â”‚                                                        â”‚ â”‚
â”‚  â”‚                [Calculate Shipping Rates] Button      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â”‚ Click "Calculate Shipping"
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. Backend: Calculate Shipping Rates                       â”‚
â”‚                                                              â”‚
â”‚  Request to ShipEngine API:                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ POST /api/v1/shipping/shipengine/rates â”‚                â”‚
â”‚  â”‚                                         â”‚                â”‚
â”‚  â”‚ Body: {                                 â”‚                â”‚
â”‚  â”‚   address: {                            â”‚                â”‚
â”‚  â”‚     street1: "123 Main Street",         â”‚                â”‚
â”‚  â”‚     city: "New York",                   â”‚                â”‚
â”‚  â”‚     state: "NY",                        â”‚                â”‚
â”‚  â”‚     postalCode: "10001"                 â”‚                â”‚
â”‚  â”‚   },                                    â”‚                â”‚
â”‚  â”‚   items: [                              â”‚                â”‚
â”‚  â”‚     {                                    â”‚                â”‚
â”‚  â”‚       id: "1",                          â”‚                â”‚
â”‚  â”‚       name: "Hat",                      â”‚                â”‚
â”‚  â”‚       quantity: 1,                      â”‚                â”‚
â”‚  â”‚       weight: { value: 8, unit: "oz" }  â”‚                â”‚
â”‚  â”‚     },                                   â”‚                â”‚
â”‚  â”‚     {                                    â”‚                â”‚
â”‚  â”‚       id: "2",                          â”‚                â”‚
â”‚  â”‚       name: "Shirt",                    â”‚                â”‚
â”‚  â”‚       quantity: 2,                      â”‚                â”‚
â”‚  â”‚       weight: { value: 12, unit: "oz" } â”‚                â”‚
â”‚  â”‚     }                                    â”‚                â”‚
â”‚  â”‚   ]                                      â”‚                â”‚
â”‚  â”‚ }                                        â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                              â”‚
â”‚  ShipEngine Response:                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ rates: [                                â”‚                â”‚
â”‚  â”‚   {                                      â”‚                â”‚
â”‚  â”‚     serviceName: "USPS Priority Mail",  â”‚                â”‚
â”‚  â”‚     carrier: "USPS",                    â”‚                â”‚
â”‚  â”‚     totalCost: 9.99,                    â”‚                â”‚
â”‚  â”‚     estimatedDeliveryDays: 3            â”‚                â”‚
â”‚  â”‚   },                                     â”‚                â”‚
â”‚  â”‚   {                                      â”‚                â”‚
â”‚  â”‚     serviceName: "FedEx Ground",        â”‚                â”‚
â”‚  â”‚     carrier: "FedEx",                   â”‚                â”‚
â”‚  â”‚     totalCost: 11.50,                   â”‚                â”‚
â”‚  â”‚     estimatedDeliveryDays: 5            â”‚                â”‚
â”‚  â”‚   },                                     â”‚                â”‚
â”‚  â”‚   {                                      â”‚                â”‚
â”‚  â”‚     serviceName: "UPS Ground",          â”‚                â”‚
â”‚  â”‚     carrier: "UPS",                     â”‚                â”‚
â”‚  â”‚     totalCost: 10.75,                   â”‚                â”‚
â”‚  â”‚     estimatedDeliveryDays: 4            â”‚                â”‚
â”‚  â”‚   }                                      â”‚                â”‚
â”‚  â”‚ ]                                        â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. Step 2: Select Shipping Method                          â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚ â”‚ âœ“ USPS Priority Mail        [Recommended] $9.99   â”‚  â”‚ â”‚
â”‚  â”‚ â”‚   Delivery: 3 business days                       â”‚  â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                                        â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚ â”‚ â—‹ UPS Ground                              $10.75   â”‚  â”‚ â”‚
â”‚  â”‚ â”‚   Delivery: 4 business days                       â”‚  â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                                        â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚ â”‚ â—‹ FedEx Ground                            $11.50   â”‚  â”‚ â”‚
â”‚  â”‚ â”‚   Delivery: 5 business days                       â”‚  â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                                        â”‚ â”‚
â”‚  â”‚ Order Summary:                                         â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                       â”‚ â”‚
â”‚  â”‚ Subtotal:  $55.00                                      â”‚ â”‚
â”‚  â”‚ Shipping:   $9.99  â† REAL COST                        â”‚ â”‚
â”‚  â”‚ Tax (8%):   $4.40                                      â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                      â”‚ â”‚
â”‚  â”‚ Total:     $69.39  â† ACCURATE TOTAL                   â”‚ â”‚
â”‚  â”‚                                                        â”‚ â”‚
â”‚  â”‚            [Submit for Review] Button                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â”‚ Click "Submit for Review"
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  6. Backend: Create Order Review with Shipping Info         â”‚
â”‚                                                              â”‚
â”‚  POST /api/v1/order-reviews                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ {                                       â”‚                â”‚
â”‚  â”‚   items: [...],                         â”‚                â”‚
â”‚  â”‚   subtotal: 55.00,                      â”‚                â”‚
â”‚  â”‚   shipping: 9.99,     â† Actual cost     â”‚                â”‚
â”‚  â”‚   tax: 4.40,                            â”‚                â”‚
â”‚  â”‚   total: 69.39,       â† Real total      â”‚                â”‚
â”‚  â”‚   shippingAddress: {  â† Complete info   â”‚                â”‚
â”‚  â”‚     firstName: "John",                  â”‚                â”‚
â”‚  â”‚     lastName: "Doe",                    â”‚                â”‚
â”‚  â”‚     street: "123 Main Street",          â”‚                â”‚
â”‚  â”‚     city: "New York",                   â”‚                â”‚
â”‚  â”‚     state: "NY",                        â”‚                â”‚
â”‚  â”‚     zipCode: "10001"                    â”‚                â”‚
â”‚  â”‚   },                                     â”‚                â”‚
â”‚  â”‚   shippingMethod: {   â† Method details  â”‚                â”‚
â”‚  â”‚     serviceName: "USPS Priority Mail",  â”‚                â”‚
â”‚  â”‚     carrier: "USPS",                    â”‚                â”‚
â”‚  â”‚     cost: 9.99,                         â”‚                â”‚
â”‚  â”‚     estimatedDeliveryDays: 3            â”‚                â”‚
â”‚  â”‚   },                                     â”‚                â”‚
â”‚  â”‚   customerNotes: "Leave at front door"  â”‚                â”‚
â”‚  â”‚ }                                        â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                              â”‚
â”‚  Database INSERT:                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ INSERT INTO order_reviews (             â”‚                â”‚
â”‚  â”‚   user_id,                              â”‚                â”‚
â”‚  â”‚   order_data,                           â”‚                â”‚
â”‚  â”‚   subtotal,                             â”‚                â”‚
â”‚  â”‚   shipping,                             â”‚                â”‚
â”‚  â”‚   tax,                                  â”‚                â”‚
â”‚  â”‚   total,                                â”‚                â”‚
â”‚  â”‚   status,                               â”‚                â”‚
â”‚  â”‚   shipping_address,                     â”‚                â”‚
â”‚  â”‚   shipping_method,                      â”‚                â”‚
â”‚  â”‚   customer_notes                        â”‚                â”‚
â”‚  â”‚ ) VALUES (...)                          â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  7. Success: Clear Cart & Navigate                          â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚  âœ… Order Submitted Successfully!       â”‚                â”‚
â”‚  â”‚                                         â”‚                â”‚
â”‚  â”‚  Order #MC-2025-123456                  â”‚                â”‚
â”‚  â”‚  Total: $69.39                          â”‚                â”‚
â”‚  â”‚                                         â”‚                â”‚
â”‚  â”‚  Your order has been submitted for      â”‚                â”‚
â”‚  â”‚  admin review. You'll be notified once  â”‚                â”‚
â”‚  â”‚  it's approved.                         â”‚                â”‚
â”‚  â”‚                                         â”‚                â”‚
â”‚  â”‚  Estimated Delivery: Jan 15, 2025       â”‚                â”‚
â”‚  â”‚                                         â”‚                â”‚
â”‚  â”‚        [View My Orders] Button          â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Admin Perspective

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ADMIN ORDER REVIEW VIEW                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Order Review #123456                      Status: [Pending â–¼] â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚                                                                 â”‚
â”‚  Customer Information:                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Name: John Doe                                          â”‚ â”‚
â”‚  â”‚ Email: john@example.com                                 â”‚ â”‚
â”‚  â”‚ Phone: (555) 123-4567                                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚  Shipping Information:                    âœ… Complete!         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Address:                                                â”‚ â”‚
â”‚  â”‚ 123 Main Street, Apt 4B                                 â”‚ â”‚
â”‚  â”‚ New York, NY 10001                                      â”‚ â”‚
â”‚  â”‚ United States                                           â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ Shipping Method:                                        â”‚ â”‚
â”‚  â”‚ USPS Priority Mail - $9.99                              â”‚ â”‚
â”‚  â”‚ Estimated Delivery: 3 business days                     â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ Delivery Instructions:                                  â”‚ â”‚
â”‚  â”‚ "Leave at front door"                                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚  Order Items:                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 1. Classic Hat                                          â”‚ â”‚
â”‚  â”‚    Qty: 1 Ã— $25.00 = $25.00                            â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ 2. Custom Shirt (Embroidered)                          â”‚ â”‚
â”‚  â”‚    Qty: 2 Ã— $30.00 = $60.00                            â”‚ â”‚
â”‚  â”‚    â€¢ Front chest logo                                   â”‚ â”‚
â”‚  â”‚    â€¢ Back design                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚  Order Summary:                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Subtotal:           $55.00                              â”‚ â”‚
â”‚  â”‚ Shipping (USPS):     $9.99  â† Admin sees real cost     â”‚ â”‚
â”‚  â”‚ Tax (8%):            $4.40                              â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                              â”‚ â”‚
â”‚  â”‚ Total:              $69.39  â† Accurate total           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚  Actions:                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ [âœ… Approve]  [âŒ Reject]  [ğŸ“ Request Changes]        â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ Admin Notes:                                            â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚ â”‚ Looks good! Custom design approved.                â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ Will ship within 3 business days.                  â”‚ â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Payment Flow (After Approval)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PAYMENT PROCESS FLOW                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Admin Approves Order
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Customer notified â”‚
â”‚ via email/app     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Customer goes to "My Orders"         â”‚
â”‚                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ Order #MC-2025-123456            â”‚â”‚
â”‚ â”‚ Status: [Approved - Pay Now]     â”‚â”‚
â”‚ â”‚                                  â”‚â”‚
â”‚ â”‚ Total: $69.39                    â”‚â”‚
â”‚ â”‚ Shipping: Already Selected âœ…    â”‚â”‚
â”‚ â”‚                                  â”‚â”‚
â”‚ â”‚ [Proceed to Payment] Button      â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ OrderCheckout Component              â”‚
â”‚                                      â”‚
â”‚ Pre-filled with:                     â”‚
â”‚ âœ… Shipping address (from review)   â”‚
â”‚ âœ… Shipping method (from review)    â”‚
â”‚ âœ… Shipping cost (from review)      â”‚
â”‚                                      â”‚
â”‚ Customer can:                        â”‚
â”‚ â€¢ Verify all details                â”‚
â”‚ â€¢ Change address (recalc shipping)  â”‚
â”‚ â€¢ Select payment method             â”‚
â”‚ â€¢ Complete payment                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        DATA FLOW                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Frontend                    Backend                    External
â”€â”€â”€â”€â”€â”€â”€â”€                    â”€â”€â”€â”€â”€â”€â”€                    â”€â”€â”€â”€â”€â”€â”€â”€

Cart.tsx
  â”‚
  â”‚ Navigate with items
  â–¼
UnifiedCheckout.tsx
  â”‚ Step 1: Address
  â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> POST /api/v1/shipping/           â”€â”€â”€â”€â”€â”€â”€â”€â”€>
  â”‚                shipengine/rates                 ShipEngine
  â”‚                                                  API
  â”‚                {                                   â”‚
  â”‚                  address,                          â”‚
  â”‚                  items                             â”‚
  â”‚                }                                   â”‚
  â”‚                                  <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚                {                 Rate calculation
  â”‚                  rates: [...]    complete
  â”‚                }
  â”‚
  â”‚ Step 2: Review
  â”‚ Customer selects rate
  â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> POST /api/v1/order-reviews
  â”‚                
  â”‚                {
  â”‚                  items,
  â”‚                  subtotal,
  â”‚                  shipping,      â† Real cost
  â”‚                  tax,
  â”‚                  total,         â† Accurate
  â”‚                  shippingAddress,
  â”‚                  shippingMethod,
  â”‚                  customerNotes
  â”‚                }
  â”‚                         â”‚
  â”‚                         â–¼
  â”‚                   INSERT INTO
  â”‚                   order_reviews
  â”‚                         â”‚
  â”‚                         â–¼
  â”‚                   {
  â”‚                     success: true,
  â”‚                     orderReviewId
  â”‚                   }
  â”‚  <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚
  â–¼
MyOrders.tsx
(Shows submitted order)


ADMIN FLOW:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

AdminOrderReview.tsx
  â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> GET /api/v1/order-reviews/:id
  â”‚
  â”‚  <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€{
  â”‚                 order with:
  â”‚                 - shippingAddress
  â”‚                 - shippingMethod
  â”‚                 - accurate total
  â”‚               }
  â”‚
  â”‚ Admin reviews & approves
  â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> PUT /api/v1/order-reviews/:id
  â”‚                {
  â”‚                  status: 'approved'
  â”‚                }
  â”‚
  â–¼
(Customer proceeds to payment)
```

---

## Error Handling Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ERROR SCENARIOS                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Scenario 1: ShipEngine API Down
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
User enters address
  â”‚
  â–¼
Try calculate shipping
  â”‚
  â–¼
ShipEngine API fails âŒ
  â”‚
  â–¼
Fallback to estimated rates âœ…
  â”‚
  â”œâ”€ Show warning: "Using estimated rates"
  â”œâ”€ Display fallback options:
  â”‚  â€¢ Standard Shipping: $9.99
  â”‚  â€¢ Express Shipping: $19.99
  â–¼
Customer proceeds with estimate


Scenario 2: Invalid Address
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
User enters address
  â”‚
  â–¼
Validate address format âœ…
  â”‚
  â–¼
Try calculate shipping
  â”‚
  â–¼
ShipEngine returns: "Invalid address"
  â”‚
  â–¼
Show address correction suggestions
  â”‚
  â”œâ”€ "Did you mean: 123 Main Street?"
  â”œâ”€ [Use Suggested]  [Keep Original]
  â–¼
Customer corrects and continues


Scenario 3: No Shipping Available
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
User enters international address
  â”‚
  â–¼
Try calculate shipping
  â”‚
  â–¼
No rates available âŒ
  â”‚
  â–¼
Show message:
  â”‚
  â”œâ”€ "Shipping not available to this location"
  â”œâ”€ "Please contact support for international orders"
  â”œâ”€ [Contact Support]  [Change Address]
  â–¼
Customer contacts support
```

---

## Success Criteria Checklist

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    IMPLEMENTATION CHECKLIST                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Phase 1: Core Functionality
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â–¡ Database schema updated with shipping fields
â–¡ UnifiedCheckout.tsx component created
â–¡ Cart.tsx updated to navigate to checkout
â–¡ Backend controller updated to accept shipping info
â–¡ Shipping info stored in order_reviews table
â–¡ Customer sees shipping cost before submission
â–¡ Admin sees complete shipping info in review

Phase 2: User Experience
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â–¡ Loading indicators during rate calculation
â–¡ Error messages for invalid addresses
â–¡ Multiple shipping options displayed
â–¡ Clear pricing breakdown shown
â–¡ Address validation implemented
â–¡ Mobile-responsive design

Phase 3: Testing
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â–¡ Can add items to cart
â–¡ Can proceed to checkout
â–¡ Address form validates correctly
â–¡ Shipping rates load successfully
â–¡ Can select shipping method
â–¡ Order submits with shipping info
â–¡ Admin sees shipping in review
â–¡ Payment flow works after approval
â–¡ Email notifications include shipping

Phase 4: Edge Cases
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â–¡ ShipEngine API failure handled
â–¡ Invalid addresses caught
â–¡ No rates available handled
â–¡ Cart empty prevention
â–¡ Duplicate submission prevented
â–¡ Address change recalculates shipping
```

---

This comprehensive flow diagram should help you understand exactly how the shipping integration works at every step of the process!

